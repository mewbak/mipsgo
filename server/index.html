<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Chat Example</title>
    <script type="text/javascript">
window.onload = function () {
  var conn;
  var src = document.getElementById("src");
  var log = document.getElementById("log");

  function appendLog(item) {
    var doScroll = log.scrollTop > log.scrollHeight - log.clientHeight - 1;
    log.appendChild(item);
    if (doScroll) {
      log.scrollTop = log.scrollHeight - log.clientHeight;
    }
  }

  document.getElementById("run").onclick = function () {
    if (!conn) {
      return false;
    }
    if (!src.value) {
      return false;
    }
    conn.send(JSON.stringify({ Source: src.value, Command: "run"}));
    return false;
  };
  document.getElementById("step").onclick = function () {
    if (!conn) {
      return false;
    }
    if (!src.value) {
      return false;
    }
    conn.send(JSON.stringify({ Source: src.value, Command: "step"}));
    return false;
  };

  if (window["WebSocket"]) {
    conn = new WebSocket("ws://" + document.location.host + "/ws");
    conn.onclose = function (evt) {
      var item = document.createElement("div");
      item.innerHTML = "<b>Connection closed.</b>";
      appendLog(item);
    };
    conn.onmessage = function (evt) {
      var messages = evt.data.split('\n');
      for (var i = 0; i < messages.length; i++) {
        var item = document.createElement("div");
        item.innerText = messages[i];
        appendLog(item);
      }
    };
  } else {
    var item = document.createElement("div");
    item.innerHTML = "<b>Your browser does not support WebSockets.</b>";
    appendLog(item);
  }
};
    </script>
    <style type="text/css">
html {
  overflow: hidden;
}

body {
  overflow: hidden;
  padding: 0;
  margin: 0;
  width: 100%;
  height: 100%;
  background: gray;
}

#log {
  background: white;
  margin: 0;
  padding: 0.5em 0.5em 0.5em 0.5em;
  position: absolute;
  top: 0.5em;
  left: 0.5em;
  right: 0.5em;
  bottom: 3em;
  overflow: auto;
}

#form {
  padding: 0 0.5em 0 0.5em;
  margin: 0;
  position: absolute;
  bottom: 1em;
  left: 0px;
  width: 100%;
  overflow: hidden;
}

    </style>
  </head>
  <body>
    <div id="log"></div>
    <form id="form">
      <input type="button"  value="RUN" id="run"/>
      <input type="button"  value="STEP" id="step"/>
      <input type="text" id="src" size="64"/>
    </form>
  </body>
</html>


<!DOCTYPE html>
<!--<html lang="en">-->
<!--<head>-->
<!--<title>ACE in Action</title>-->
<!--<style type="text/css" media="screen">-->
<!--#editor {-->
  <!--position: absolute;-->
  <!--top: 0;-->
  <!--right: 0;-->
  <!--bottom: 0;-->
  <!--left: 0;-->
  <!--}-->
  <!--</style>-->
<!--</head>-->
<!--<body>-->

<!--<div id="editor"> addi $t0, $0, 10-->
<!--sll $t0, $t0, 3-->
<!--pbin $t0-->
<!--</div>-->

<!--<script src="/ace/ace.js" type="text/javascript" charset="utf-8"></script>-->
<!--<script>-->
<!--var editor = ace.edit("editor");-->
  <!--editor.setTheme("ace/theme/solarized_dark");-->
  <!--editor.getSession().setMode("ace/mode/assembly_x86");-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
